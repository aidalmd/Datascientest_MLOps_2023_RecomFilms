FROM mysql:latest

WORKDIR /app

COPY ./utils/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

ENV MYSQL_ROOT_PASSWORD=admin1234
ENV MYSQL_DATABASE=recommendation

#RUN mysqldump -u admin -p recommendation > data.sql

# Copy the SQL dump file to /docker-entrypoint-initdb.d
COPY data.sql /docker-entrypoint-initdb.d/

# Expose the MySQL port
EXPOSE 3306
